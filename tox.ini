[tox]
distshare = {homedir}/.tox/distshare
envlist = py34
indexserver =
    pypi = https://pypi.python.org/simple
skipsdist = True

[testenv]
commands = py.test pdt tests --junitxml={envlogdir}/junit-{envname}.xml --splinter-webdriver=phantomjs
deps = -r{toxinidir}/requirements-testing.txt
install_command = pip install --pre --extra-index-url={env:extra_index_url:http://pypi.python.org/simple} {opts} {packages}

[testenv:coveralls]
basepython = python3.4
deps =
    coveralls
    -r{toxinidir}/requirements-testing.txt
commands =
    py.test --cov=pdt --cov-report=term-missing tests
    coveralls
passenv = DISPLAY COVERALLS_REPO_TOKEN

[pytest]
norecursedirs = build .* .env media static deployment
addopts = -vvl --pylama
DJANGO_SETTINGS_MODULE=pdt.settings_test

[pylama]
format = pep8
skip = */.tox/*,*/.env/*,pdt/core/migrations/*,*settings*
linters = pylint,mccabe,pep8,pep257
ignore = F0401,C0111,E731,D100,W0621,W0108,R0201,W0401,W0614,I0011

[pylama:pep8]
max_line_length = 120

[pylama:pylint]
max_line_length = 120
